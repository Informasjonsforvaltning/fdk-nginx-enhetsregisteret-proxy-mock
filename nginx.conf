
events {
  worker_connections  1024;
}

http {

    server {

        listen 8080;
        server_name default_server;

        location ~ /enhetsregisteret/api/enheter/(.*) {
            default_type application/json;
            root /mockdata/$1.json;
            try_files $uri @rewrite1;
        }

        location ~ /enhetsregisteret/api/underenheter/(.*) {
            default_type application/json;
            root /mockdata/$1.json;
            try_files $uri @rewrite2;
        }

        location @rewrite1 {
            root /enhetsregisteret/api/enheter/(.*);
            proxy_pass https://data.brreg.no;

        }

        location @rewrite2 {
            root /enhetsregisteret/api/underenheter/(.*);
            proxy_pass https://data.brreg.no;

        }

    }
}