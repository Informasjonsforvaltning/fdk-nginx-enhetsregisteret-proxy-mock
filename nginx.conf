
events {
  worker_connections  1024;
}

http {

    server {

        listen 8080;
        server_name default_server;

        location ~ /enhetsregisteret/api/enheter/(.*) {
            default_type application/json;
            root /mockdata/$1.json;
            try_files $uri $uri/ @rewrite;
        }

        location ~ /enhetsregisteret/api/underenheter/(.*) {
            default_type application/json;
            root /mockdata/$1.json;
            try_files $uri $uri/ @rewrite;
        }

        location @rewrite {
            proxy_pass https://data.brreg.no;

        }

    }
}